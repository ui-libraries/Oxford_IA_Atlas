<html lang='en'>

<head>
  <title>Historical Atlas of Oxford, Iowa</title>
  <meta charset="utf-8" />
  <!--for map and font styles-->
  <link href='https://api.mapbox.com/mapbox-assembly/v0.24.0/assembly.min.css' rel='stylesheet'>
  <link href='https://api.mapbox.com/mapbox.js/v3.2.1/mapbox.css' rel='stylesheet' />
  <link href="https://fonts.googleapis.com/css2?family=Quattrocento&family=Open+Sans&display=swap" rel="stylesheet">

  <!--for filter button icon support-->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.10.2/css/all.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.10.2/css/v4-shims.css">

  <!--leaflet tag filter buttons from: https://github.com/maydemirx/leaflet-tag-filter-button-->
  <link rel="stylesheet" href="src/leaflet-tag-filter-button.css">
  <link rel="stylesheet" href="src/easy-button.css">

  <!-- for info button -->
  <link rel='stylesheet' href='https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css'>

  <!--for styled layer control-->
  <link rel="stylesheet" href="css/styledLayerControl.css" />

  <style type="text/css">
    <style>

    body {
      margin: 0px;
      height: 100%;
      width: 100%;
    }

    /* Add banner to header background */
    header {
      background-image: url('images/Sheep_farm_Oxford.png');
      position: fixed;
      width: 100%;
      height: 100px;
      background-color: #000000;
      box-shadow: 0px 5px 5px black;
      z-index: 800;
    }

    /* Set and style fonts for text in map */
    h1 {
      font-family: 'Quattrocento', serif;
      font-size: 40px;
      display: inline-block;
      color: white;
      margin-top: 0.5em;
      margin-bottom: 0.0em;
      margin-left: 0.5em;
      margin-right: 0;
      font-weight: normal;
    }

    h2 {
      font-family: 'Open Sans', sans-serif;
      font-size: 15px;
      display: inline-block;
      color: white;
      margin-top: 0.5em;
      margin-bottom: 0.0em;
      margin-left: 1.5em;
      margin-right: 0;
      font-weight: normal;
    }

    h3 {
      font-family: 'Quattrocento', serif;
      font-size: 12px;
      display: inline-block;
      margin-top: 0.0em;
      margin-bottom: 0.0em;
      margin-left: 0;
      margin-right: 0;
      font-weight: bold;
    }

    h4 {
      font-family: 'Quattrocento', serif;
      font-size: 12px;
      display: inline-block;
      margin-top: 0.0em;
      margin-bottom: 0.0em;
      margin-left: 0;
      margin-right: 0;
      font-weight: normal;
    }

    /* Set map parameters */
    #map {
      position: fixed;
      top: 100px;
      bottom: 0px;
      width: 100%;
    }

    /* Set background colors for popup windows */
    .leaflet-popup-content-wrapper {
      background-color: white;
    }

    .leaflet-popup-tip {
      /*display: none;*/
      border-top:10px solid white;
    }

    /* Set background color of layer control */
    .leaflet-control-layers-expanded {
      font-family: 'Quattrocento', serif;
      font-size: 15px;
      display: inline-block;
      background-color: white;
    }

    .easy-button-button {
      display: inline-block !important;
    }

    .tag-filter-tags-container {
      left: 30px;
    }

    .leaflet-touch .leaflet-bar a {
      background-color: white;
    }

    .legend {
      background-color: white;
      border-radius: 3px;
      bottom: 30px;
      width: 175px;
      box-shadow: 0px 0px 0px 2px rgba(0, 0, 0, 0.3);
      font: 12px/20px 'Quattrocento', 'Quattrocento', 'Quattrocento', serif;
      padding: 10px;
      position: absolute;
      right: 10px;
      z-index: 1;
      line-height: 18px;
      color: #555;
    }

    .legend i {
      width: 10px;
      height: 10px;
      float: left;
      margin-right: 15px;
      margin-top: 4px;
      opacity: 0.7;
    }

    /* leaflet layers control plugin css */
    .leaflet-control-layers-group-name{font-weight:700;margin-bottom:.2em;margin-left:3px}.leaflet-control-layers-group{margin-bottom:.5em}

    .leaflet-control-layers .leaflet-control-layers-group-label{padding-left:20px;display:block}
    .leaflet-control-layers label{padding-left:40px;padding-right:10px;display:none;}
    .leaflet-control-layers label.trigger{
      position:absolute;
      left:0;
      padding:0;
      margin:0;
      display:block;
      cursor:pointer;
    }
    .leaflet-control-layers label.trigger:before{content:"▶";font-weight:normal;}
    .leaflet-control-layers .trigger-radio:checked ~ label.trigger:before{content:"▼"}

    .leaflet-control-layers .trigger-radio{display:none;}
    .leaflet-control-layers .trigger-radio:checked ~ label{display:block;}
  </style>
</head>

<body>
  <header>
    <h1>Land Ownership in Oxford, Iowa: 1859 - 1953</h1><br>
    <h2>Research and map by Matthew Noellert, PhD, et al. | University of Iowa Digital Scholarship & Publishing Studio, 2020 | Click <a href="https://dsps.lib.uiowa.edu/digital-oxford-twp/sources/data/#GIS" target="_blank">here</a> for works cited.</h2>
  </header>

  <!-- map -->
  <div id="map"></div>

  <!-- button-dependent info window -->
  <div id="dialog" title="Land Ownership in Oxford, IA">
    <h4>This is a map of land ownership and family origins for Oxford, Iowa from 1859 to 1953. You can toggle different layers of this dataset with the expandable control in the top right corner. As you do so, you will notice a layer-based legend appear in the bottom right corner. Please click on the land lot polygons for more information. References for this map can be found
      <a href="https://dsps.lib.uiowa.edu/digital-oxford-twp/sources/data/#GIS" style='color: blue;' target="_blank">here</a>. This map is intended for research and is not to be used for legal purposes.
    </h4>
  </div>
  <!-- end button-dependent info window -->

  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src='https://api.mapbox.com/mapbox.js/v3.2.1/mapbox.js'></script>
  <script src='https://api.mapbox.com/mapbox-assembly/v0.8.0/assembly.js'></script>

  <!--leaflet tag filter buttons from: https://github.com/maydemirx/leaflet-tag-filter-button-->
  <script src="src/easy-button.js"></script>
  <script src="src/leaflet-tag-filter-button.js"></script>

  <!-- for button-dependent map information window -->
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

  <!--for styled layer control-->
  <script src="src/styledLayerControl.js"></script>

  <script>
/*
    // add mapbox tiles
    L.mapbox.accessToken = 'pk.eyJ1IjoiamVib3dlMyIsImEiOiJjajY1M3l6bWIxeTQwMndtcXRuN3F4ejFpIn0.aE7P49pqaBKjy2HTOw-tgw'; // enter Mapbox access token

    var basemap = L.mapbox.styleLayer('mapbox://styles/jebowe3/ck8lzc5x7100a1jp70zpxcxap');

    var overmap1 = L.mapbox.styleLayer('mapbox://styles/jebowe3/ck8lzi05u17851ip494ycaerz');
*/
    var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
      attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community',
      maxZoom: 16,
      minZoom: 12,
    });
/*
    var CartoDB_Positron = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
    	attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
    	subdomains: 'abcd',
    	maxZoom: 16,
      minZoom: 12,
    });

        // define the basemap using the thunderforest pioneer map and set minimum and maximum zoom levels
        var Thunderforest = L.tileLayer('https://tile.thunderforest.com/pioneer/{z}/{x}/{y}.png?apikey=dd2dca516d114fd89c0b1403358cbfa8', {
          attribution: '&copy; <a href="http://www.thunderforest.com/">Thunderforest</a>, &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
          apikey: '<dd2dca516d114fd89c0b1403358cbfa8>',
          maxZoom: 16,
          minZoom: 7,
        });
*/
    // center map on Iowa coordinates and set initial zoom
    var map = L.map('map', {
      maxBounds: L.latLngBounds([44, -88.0], [40.0, -99.0]),
      layers: Esri_WorldImagery,
    }).setView([41.742764, -91.768114], 12);

    // add a scale bar
    L.control.scale({
      position: 'bottomleft'
    }).addTo(map);

    // Add a function to style the polygons by ownership type
    function getColorType(d) {
      return d === "Absentee" ? 'red' :
        d === "Resident" ? 'blue' :
        d === "Corporation" ? 'yellow' :
        'rgba(0,0,0,0.0)';
    };

    // Add a function to style the polygons by family origins
    function getColorOrigin(d) {
      return d === "Austria-Hungary-Czech" ? '#e3e600' :
        d === "Eastern U.S." ? '#0e4bef' :
        d === "Germany" ? '#8954c0' :
        d === "Iowa" ? 'orange' :
        d === "Ireland" ? '#58bb8e' :
        d === "Midwest U.S." ? '#00a6d6' :
        d === "UK" ? '#cd89ab' :
        d === "Other" ? 'gray' :
        'rgba(0,0,0,0.0)'; // supported by Microsoft Edge?
      //'#1C00ff00';
    };

    // Add a function to style the polygons by ownership percentile
    function getColorWealth(d) {
      return d === "Top 10%" ? '#2c7fb8' :
        d === "Middle 40%" ? '#7fcdbb' :
        d === "Bottom 50%" ? '#edf8b1' :
      'rgba(0,0,0,0.0)';
    };

    // load the data asynchronously
    d3.queue()
      .defer(d3.json, 'data/Oxford_1859.geojson')
      .defer(d3.json, 'data/Oxford_1870.geojson')
      .defer(d3.json, 'data/Oxford_1889.geojson')
      .defer(d3.json, 'data/Oxford_1900.geojson')
      .defer(d3.json, 'data/Oxford_1917.geojson')
      .defer(d3.json, 'data/Oxford_1934.geojson')
      .defer(d3.json, 'data/Oxford_1939.geojson')
      .defer(d3.json, 'data/Oxford_1948.geojson')
      .defer(d3.json, 'data/Oxford_1953.geojson')
      .await(drawMap);

    // define drawMap function
    function drawMap(err, oxford1859, oxford1870, oxford1889, oxford1900, oxford1917, oxford1934, oxford1939, oxford1948, oxford1953) {

      var oxfordLots1859 = L.geoJson(oxford1859, {

        // style the layer
        style: function(feature) {

          //var tags = [];
          //tags.push('Owner: ' + feature.properties.surname);

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: '#cd89ab',
            fillOpacity: 0.5,
            //tags: tags //define the tags with the tags array
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordLots1859.resetStyle(e.target);
          });

        }

      }).addTo(map); // add the layer to the map

      var oxfordTypes1859 = L.geoJson(oxford1859, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorType(feature.properties.owntype),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordTypes1859.resetStyle(e.target);
          });

        }

      });

      var oxfordOrigins1859 = L.geoJson(oxford1859, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorOrigin(feature.properties.fam_origin),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordOrigins1859.resetStyle(e.target);
          });

        }

      });

      var oxfordWealth1859 = L.geoJson(oxford1859, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorWealth(feature.properties.wealth_percentile),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordWealth1859.resetStyle(e.target);
          });

        }

      });

      var oxfordLots1870 = L.geoJson(oxford1870, {

        // style the layer
        style: function(feature) {

          //var tags = [];
          //tags.push('Owner: ' + feature.properties.surname);

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: '#cd89ab',
            fillOpacity: 0.5,
            //tags: tags //define the tags with the tags array
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordLots1870.resetStyle(e.target);
          });

        }

      });

      var oxfordTypes1870 = L.geoJson(oxford1870, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorType(feature.properties.owntype),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordTypes1870.resetStyle(e.target);
          });

        }

      });

      var oxfordOrigins1870 = L.geoJson(oxford1870, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorOrigin(feature.properties.fam_origin),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordOrigins1870.resetStyle(e.target);
          });

        }

      });

      var oxfordWealth1870 = L.geoJson(oxford1870, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorWealth(feature.properties.wealth_percentile),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordWealth1870.resetStyle(e.target);
          });

        }

      });

      var oxfordLots1889 = L.geoJson(oxford1889, {

        // style the layer
        style: function(feature) {

          //var tags = [];
          //tags.push('Owner: ' + feature.properties.surname);

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: '#cd89ab',
            fillOpacity: 0.5,
            //tags: tags //define the tags with the tags array
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordLots1889.resetStyle(e.target);
          });

        }

      });

      var oxfordTypes1889 = L.geoJson(oxford1889, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorType(feature.properties.owntype),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordTypes1889.resetStyle(e.target);
          });

        }

      });

      var oxfordOrigins1889 = L.geoJson(oxford1889, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorOrigin(feature.properties.fam_origin),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordOrigins1889.resetStyle(e.target);
          });

        }

      });

      var oxfordWealth1889 = L.geoJson(oxford1889, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorWealth(feature.properties.wealth_percentile),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordWealth1889.resetStyle(e.target);
          });

        }

      });

      var oxfordLots1900 = L.geoJson(oxford1900, {

        // style the layer
        style: function(feature) {

          //var tags = [];
          //tags.push('Owner: ' + feature.properties.surname);

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: '#cd89ab',
            fillOpacity: 0.5,
            //tags: tags //define the tags with the tags array
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordLots1900.resetStyle(e.target);
          });

        }

      });

      var oxfordTypes1900 = L.geoJson(oxford1900, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorType(feature.properties.owntype),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordTypes1900.resetStyle(e.target);
          });

        }

      });

      var oxfordOrigins1900 = L.geoJson(oxford1900, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorOrigin(feature.properties.fam_origin),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordOrigins1900.resetStyle(e.target);
          });

        }

      });

      var oxfordWealth1900 = L.geoJson(oxford1900, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorWealth(feature.properties.wealth_percentile),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordWealth1900.resetStyle(e.target);
          });

        }

      });

      var oxfordLots1917 = L.geoJson(oxford1917, {

        // style the layer
        style: function(feature) {

          //var tags = [];
          //tags.push('Owner: ' + feature.properties.surname);

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: '#cd89ab',
            fillOpacity: 0.5,
            //tags: tags //define the tags with the tags array
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordLots1917.resetStyle(e.target);
          });

        }

      });

      var oxfordTypes1917 = L.geoJson(oxford1917, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorType(feature.properties.owntype),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordTypes1917.resetStyle(e.target);
          });

        }

      });

      var oxfordOrigins1917 = L.geoJson(oxford1917, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorOrigin(feature.properties.fam_origin),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordOrigins1917.resetStyle(e.target);
          });

        }

      });

      var oxfordWealth1917 = L.geoJson(oxford1917, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorWealth(feature.properties.wealth_percentile),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordWealth1917.resetStyle(e.target);
          });

        }

      });

      var oxfordLots1934 = L.geoJson(oxford1934, {

        // style the layer
        style: function(feature) {

          //var tags = [];
          //tags.push('Owner: ' + feature.properties.surname);

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: '#cd89ab',
            fillOpacity: 0.5,
            //tags: tags //define the tags with the tags array
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordLots1934.resetStyle(e.target);
          });

        }

      });

      var oxfordTypes1934 = L.geoJson(oxford1934, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorType(feature.properties.owntype),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordTypes1934.resetStyle(e.target);
          });

        }

      });

      var oxfordOrigins1934 = L.geoJson(oxford1934, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorOrigin(feature.properties.fam_origin),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordOrigins1934.resetStyle(e.target);
          });

        }

      });

      var oxfordWealth1934 = L.geoJson(oxford1934, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorWealth(feature.properties.wealth_percentile),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordWealth1934.resetStyle(e.target);
          });

        }

      });

      var oxfordLots1939 = L.geoJson(oxford1939, {

        // style the layer
        style: function(feature) {

          //var tags = [];
          //tags.push('Owner: ' + feature.properties.surname);

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: '#cd89ab',
            fillOpacity: 0.5,
            //tags: tags //define the tags with the tags array
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordLots1939.resetStyle(e.target);
          });

        }

      });

      var oxfordTypes1939 = L.geoJson(oxford1939, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorType(feature.properties.owntype),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordTypes1939.resetStyle(e.target);
          });

        }

      });

      var oxfordOrigins1939 = L.geoJson(oxford1939, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorOrigin(feature.properties.fam_origin),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordOrigins1939.resetStyle(e.target);
          });

        }

      });

      var oxfordWealth1939 = L.geoJson(oxford1939, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorWealth(feature.properties.wealth_percentile),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordWealth1939.resetStyle(e.target);
          });

        }

      });

      var oxfordLots1948 = L.geoJson(oxford1948, {

        // style the layer
        style: function(feature) {

          //var tags = [];
          //tags.push('Owner: ' + feature.properties.surname);

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: '#cd89ab',
            fillOpacity: 0.5,
            //tags: tags //define the tags with the tags array
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordLots1948.resetStyle(e.target);
          });

        }

      });

      var oxfordTypes1948 = L.geoJson(oxford1948, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorType(feature.properties.owntype),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordTypes1948.resetStyle(e.target);
          });

        }

      });

      var oxfordOrigins1948 = L.geoJson(oxford1948, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorOrigin(feature.properties.fam_origin),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordOrigins1948.resetStyle(e.target);
          });

        }

      });

      var oxfordWealth1948 = L.geoJson(oxford1948, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorWealth(feature.properties.wealth_percentile),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordWealth1948.resetStyle(e.target);
          });

        }

      });

      var oxfordLots1953 = L.geoJson(oxford1953, {

        // style the layer
        style: function(feature) {

          //var tags = [];
          //tags.push('Owner: ' + feature.properties.surname);

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: '#cd89ab',
            fillOpacity: 0.5,
            //tags: tags //define the tags with the tags array
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordLots1953.resetStyle(e.target);
          });

        }

      });

      var oxfordTypes1953 = L.geoJson(oxford1953, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorType(feature.properties.owntype),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordTypes1953.resetStyle(e.target);
          });

        }

      });

      var oxfordOrigins1953 = L.geoJson(oxford1953, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorOrigin(feature.properties.fam_origin),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordOrigins1953.resetStyle(e.target);
          });

        }

      });

      var oxfordWealth1953 = L.geoJson(oxford1953, {

        // style the layer
        style: function(feature) {

          return {
            stroke: 1,
            color: 'white',
            strokeOpacity: 1,
            weight: 1,
            fillColor: getColorWealth(feature.properties.wealth_percentile),
            fillOpacity: 0.5,
          };
        },

        onEachFeature: function(feature, layer) {

          var firstname = feature.properties.firstname;

          var name = firstname + " ";

          if (firstname == null) {
            var name = "";
          }

          // bind a popup window
          layer.bindPopup('<h3>' + name + feature.properties.surname + ', ' + feature.properties.year + '</h3><br><h4>Ownership Type: ' + feature.properties.owntype + '<br>Family Origin: ' + feature.properties.fam_origin + '<br>' + feature.properties.wealth_percentile + ' of landowners by acreage' + '<br>Acres: ' + feature.properties.acres + '</h4>');
          // change layer style on mouseover
          layer.on("mouseover", function(e) {
            layer.setStyle({
              color: 'yellow',
              weight: 3,
              opacity: 1,
            }).bringToFront();
          });
          // reset style on mouseout
          layer.on("mouseout", function(e) {
            oxfordWealth1953.resetStyle(e.target);
          });

        }

      });

      // create an info button to describe the map and supporting data
      var infoButton = L.easyButton({
        id: 'infoButton',
        position: 'topright',
        states: [{
          stateName: 'show-info',
          icon: '<strong>?</strong>',
          title: 'Tell me about this map',
          onClick: function(btn, map) {
            $("#dialog").dialog({ position: { my: 'middle', at: 'top+300'}, });
          }
        }]
      }).addTo(map);

/*
      L.control.tagFilterButton({
          data: ['Canada', 'E. Europe', 'Northeastern US', 'Germanic', 'Iowa', 'Midwestern US', 'Southern US', 'UK', 'N. Europe', 'No Data'],
          icon: '<i class="fas fa-globe" style="font-size:18px; padding-top: 6px;"></i>',
          filterOnEveryClick: true
      }).addTo(map);

      L.control.tagFilterButton({
        data: ['Owner: A.S.', 'Owner: Ackerman', 'Owner: Adams', 'Owner: Ahren', 'Owner: Alexander', 'Owner: Amana Society', 'Owner: Baker', 'Owner: Barnes', 'Owner: Barry', 'Owner: Baum', 'Owner: Bell', 'Owner: Benton', 'Owner: Berryhill', 'Owner: Bireline', 'Owner: Black', 'Owner: Bond', 'Owner: Bostwick', 'Owner: Brant', 'Owner: Brennan', 'Owner: Brick', 'Owner: Brown', 'Owner: Bryant', 'Owner: C.R.I.P. R.R. Co.', 'Owner: Carson', 'Owner: Cary', 'Owner: Church', 'Owner: Clark', 'Owner: Clear', 'Owner: Clensman', 'Owner: Clodfelter', 'Owner: Co.', 'Owner: Collins', 'Owner: Combe', 'Owner: Conner', 'Owner: Conners', 'Owner: Cook', 'Owner: Cooke', 'Owner: Corbin', 'Owner: Cotter', 'Owner: Cox', 'Owner: Crawford', 'Owner: Crossen', 'Owner: Curtis', 'Owner: Cushing', 'Owner: D.L.D.', 'Owner: Daniels', 'Owner: Darling', 'Owner: David', 'Owner: Delaney', 'Owner: Delwiter', 'Owner: Donahoe', 'Owner: Donaldson', 'Owner: Donhan', 'Owner: Doty', 'Owner: Douglass', 'Owner: Downey', 'Owner: Durant', 'Owner: Dutch', 'Owner: E.E.', 'Owner: E.E.W.', 'Owner: Eddy', 'Owner: Edwards', 'Owner: Elliott', 'Owner: Emary', 'Owner: Emmery', 'Owner: English', 'Owner: Ewing', 'Owner: Fall', 'Owner: Ferguson', 'Owner: Fitzgerald', 'Owner: Floerchinger', 'Owner: Foley', 'Owner: Foster', 'Owner: Gaheen', 'Owner: Gard', 'Owner: Garitz', 'Owner: Geigenheimer', 'Owner: Gibbony', 'Owner: Gilroy', 'Owner: Goben', 'Owner: Gossenberger', 'Owner: Gould', 'Owner: H.', 'Owner: H.T.S.', 'Owner: Hamilton', 'Owner: Hardy', 'Owner: Harkowitz', 'Owner: Harper', 'Owner: Hartwell', 'Owner: Hayes', 'Owner: Heifner', 'Owner: Heitz', 'Owner: Henderson', 'Owner: Hilborn', 'Owner: Holle', 'Owner: Howard', 'Owner: Huff', 'Owner: Hughes', 'Owner: Hutt', 'Owner: Imeel', 'Owner: Ives', 'Owner: J.D.', 'Owner: J.M.', 'Owner: J.N.', 'Owner: J.R.?', 'Owner: Jacobs', 'Owner: Johnson Co.', 'Owner: Kadera', 'Owner: Kelly', 'Owner: Kennedy', 'Owner: Kershaw', 'Owner: Kirf', 'Owner: Klaus', 'Owner: Klenk', 'Owner: Krall', 'Owner: L.C.', 'Owner: L.R.', 'Owner: Landerbalk', 'Owner: Lengle', 'Owner: Linkhart', 'Owner: Logan', 'Owner: Loveless', 'Owner: Lucas', 'Owner: Luse', 'Owner: Lyle', 'Owner: M.H.H. & Co.', 'Owner: Maetter', 'Owner: Maher', 'Owner: Mahoney', 'Owner: Mahony', 'Owner: Markham', 'Owner: Marvin', 'Owner: Mastern', 'Owner: McCaddon', 'Owner: McCandless', 'Owner: McDonough', 'Owner: McFarland', 'Owner: McGillicuddy', 'Owner: McKee', 'Owner: McVean', 'Owner: Mechler', 'Owner: Mendenhall', 'Owner: Merritt', 'Owner: Moreland', 'Owner: Myers', 'Owner: Nels', 'Owner: Novak', 'Owner: Oakes', 'Owner: Oaks', 'Owner: Osborn', 'Owner: Ostericher', 'Owner: Plympton', 'Owner: Price', 'Owner: Ra?', 'Owner: Remley', 'Owner: Rentz', 'Owner: Renz', 'Owner: Rourk', 'Owner: S.S.', 'Owner: Saxon', 'Owner: Saxton', 'Owner: Schonborn', 'Owner: Scott', 'Owner: Sheen', 'Owner: Sies', 'Owner: Smith', 'Owner: Spillam', 'Owner: Starr', 'Owner: Stone', 'Owner: Stratton', 'Owner: T.C.', 'Owner: Taylor', 'Owner: Thomas', 'Owner: Thompson', 'Owner: Tranter', 'Owner: Troulman', 'Owner: Vanderlip', 'Owner: Voelker', 'Owner: W.A.D.', 'Owner: W.G.', 'Owner: Wagner', 'Owner: Wallace', 'Owner: Walters', 'Owner: Ward', 'Owner: Waterman', 'Owner: Welch', 'Owner: Wentz', 'Owner: Wesiner', 'Owner: Wilcox', 'Owner: Williams', 'Owner: Winder', 'Owner: Woods', 'Owner: Yenter'],
        icon: '<i class="fas fa-user-circle" style="font-size:18px; padding-top: 6px;"></i>',
        filterOnEveryClick: true
      }).addTo(map);

      L.control.tagFilterButton({
        data: ['Top 10% of landowners by acreage', 'Top 25% of landowners by acreage', 'Top 50% of landowners by acreage'],
        icon: '<i class="fas fa-border-all" style="font-size:18px; padding-top: 6px;"></i>',
        filterOnEveryClick: true
      }).addTo(map);

      jQuery('.easy-button-button').click(function() {
        target = jQuery('.easy-button-button').not(this);
        target.parent().find('.tag-filter-tags-container').css({
          'display': 'none',
        });
      });

      //disable dragging of the map after clicking a filter button
      jQuery('.easy-button-button').click(function() {
        map.dragging.disable();
      });

      //enable dragging of the map after clicking on the map
      map.on('click', function() {
        map.dragging.enable();
      });

      var baseMaps = {
        "Property Boundaries, 1859": oxfordLots1859,
        "Landowner Type, 1859": oxfordTypes1859,
        "Family Origins, 1859": oxfordOrigins1859,
        "Ownership Percentile, 1859": oxfordWealth1859,
      };

      var overlays = {
        //"Family Origins, 1859": oxfordOrigins1859,
      }

      // all done with the layers, add them to layer control
      L.control.layers(baseMaps, overlays, {
        collapsed: true,
      }).addTo(map);
*/

      var baseMaps = [
        {
					groupName : "Property Boundaries",
					expanded : false,
					layers : {
            "Lot Boundaries, 1859": oxfordLots1859,
            "Lot Boundaries, 1870": oxfordLots1870,
            "Lot Boundaries, 1889": oxfordLots1889,
            "Lot Boundaries, 1900": oxfordLots1900,
            "Lot Boundaries, 1917": oxfordLots1917,
            "Lot Boundaries, 1934": oxfordLots1934,
            "Lot Boundaries, 1939": oxfordLots1939,
            "Lot Boundaries, 1948": oxfordLots1948,
            "Lot Boundaries, 1953": oxfordLots1953,
					}
				},
        {
					groupName : "Landowner Type",
					expanded : false,
					layers : {
            "Landowner Type, 1859": oxfordTypes1859,
            "Landowner Type, 1870": oxfordTypes1870,
            "Landowner Type, 1889": oxfordTypes1889,
            "Landowner Type, 1900": oxfordTypes1900,
            "Landowner Type, 1917": oxfordTypes1917,
            "Landowner Type, 1934": oxfordTypes1934,
            "Landowner Type, 1939": oxfordTypes1939,
            "Landowner Type, 1948": oxfordTypes1948,
            "Landowner Type, 1953": oxfordTypes1953,
					}
				},
        {
					groupName : "Family Origins",
					expanded : false,
					layers : {
            "Family Origins, 1859": oxfordOrigins1859,
            "Family Origins, 1870": oxfordOrigins1870,
            "Family Origins, 1889": oxfordOrigins1889,
            "Family Origins, 1900": oxfordOrigins1900,
            "Family Origins, 1917": oxfordOrigins1917,
            "Family Origins, 1934": oxfordOrigins1934,
            "Family Origins, 1939": oxfordOrigins1939,
            "Family Origins, 1948": oxfordOrigins1948,
            "Family Origins, 1953": oxfordOrigins1953,
					}
				},
        {
					groupName : "Ownership Percentile",
					expanded : false,
					layers : {
            "Ownership Percentile, 1859": oxfordWealth1859,
            "Ownership Percentile, 1870": oxfordWealth1870,
            "Ownership Percentile, 1889": oxfordWealth1889,
            "Ownership Percentile, 1900": oxfordWealth1900,
            "Ownership Percentile, 1917": oxfordWealth1917,
            "Ownership Percentile, 1934": oxfordWealth1934,
            "Ownership Percentile, 1939": oxfordWealth1939,
            "Ownership Percentile, 1948": oxfordWealth1948,
            "Ownership Percentile, 1953": oxfordWealth1953,
					}
				},
			];

      var options = {
				container_width 	: "300px",
				group_maxHeight     : "80px",
				//container_maxHeight : "350px",
				exclusive       	: true
			};

		  var control = L.Control.styledLayerControl(baseMaps, null, options);
			map.addControl(control);

      //disable dragging of the map after clicking the layer control
      jQuery('.ac-container').click(function() {
        map.dragging.disable();
      });

      //disable dragging of the map after scrolling the layer control
      jQuery('.ac-container').scroll(function() {
        map.dragging.disable();
      });

      //enable dragging of the map after clicking on the map
      map.on('click', function() {
        map.dragging.enable();
      });

      // create legend for ownership type
      var typeLegend = L.control({
        position: 'bottomright'
      });

      // create legend for the family origins
      var originLegend = L.control({
        position: 'bottomright'
      });

      // create legend for ownership percentiles
      var wealthLegend = L.control({
        position: 'bottomright'
      });

      // add content to the legend
      typeLegend.onAdd = function(map) {

        var div = L.DomUtil.create('div', 'info legend'),
          grades = ['Absentee', 'Corporation', 'Resident'],
          labels = ["<h3 style='font-size:14px; font-weight:bold'>Land Ownership Type</h3>"];

        // loop through our origins and generate a label with a colored square for each
        for (var i = 0; i < grades.length; i++) {
          div.innerHTML +=
            labels.push('<i style="background:' + getColorType(grades[i]) + '"></i> ' +
              (grades[i]));
        }
        div.innerHTML = labels.join('<br>');
        return div;
      };

      // add content to the legend
      originLegend.onAdd = function(map) {

        var div = L.DomUtil.create('div', 'info legend'),
          grades = ['Austria-Hungary-Czech', 'Eastern U.S.', 'Germany', 'Iowa', 'Ireland', 'Midwest U.S.', 'UK', 'Other'],
          labels = ["<h3 style='font-size:14px; font-weight:bold'>Family Origins</h3>"];

        // loop through our origins and generate a label with a colored square for each
        for (var i = 0; i < grades.length; i++) {
          div.innerHTML +=
            labels.push('<i style="background:' + getColorOrigin(grades[i]) + '"></i> ' +
              (grades[i]));
        }
        div.innerHTML = labels.join('<br>');
        return div;
      };

      // add content to the legend
      wealthLegend.onAdd = function(map) {

        var div = L.DomUtil.create('div', 'info legend'),
          grades = ['Top 10%', 'Middle 40%', 'Bottom 50%'],
          labels = ["<h3 style='font-size:14px; font-weight:bold'>Land Ownership Percentile</h3>"];

        // loop through our origins and generate a label with a colored square for each
        for (var i = 0; i < grades.length; i++) {
          div.innerHTML +=
            labels.push('<i style="background:' + getColorWealth(grades[i]) + '"></i> ' +
              (grades[i]));
        }
        div.innerHTML = labels.join('<br>');
        return div;
      };

      // add this legend to the map, because the associated layer is on by default
      //originLegend.addTo(map);

      // when the user changes the baselayer, switch the legend
      map.on('baselayerchange', function(eventLayer) {
        if (eventLayer.name.includes('Landowner Type')) {
          this.removeControl(originLegend);
          this.removeControl(wealthLegend);
          typeLegend.addTo(this);
        } if (eventLayer.name.includes('Family Origins')) {
          this.removeControl(typeLegend);
          this.removeControl(wealthLegend);
          originLegend.addTo(this);
        } if (eventLayer.name.includes('Ownership Percentile')) {
          this.removeControl(typeLegend);
          this.removeControl(originLegend);
          wealthLegend.addTo(this);
        } if (eventLayer.name.includes('Lot Boundaries')) {
          this.removeControl(originLegend);
          this.removeControl(typeLegend);
          this.removeControl(wealthLegend);
        }
      });

    }; // end drawMap function

  </script>
</body>

</html>
